<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="./functions/headerscript.js"></script>
    <title>Scientific Python - Peer Review</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body id="drop-zone">

<header>
	<h1>Scientific Programming with Python</h1>
	<h2>Peer Review Template</h2>
	<p>This form's goal is to 1) enable faster grading and 2) unify the feedback given to the students.</p>
	<div class="workflow-container">
		<h3 class="workflow-heading">Workflow:</h3>
			<ol class="workflow-description">
				<li>Input Student's SciPro_ID</li>
				<li>Perform Peer Review</li>
				<li>Generate (optional) -> Save Session (optional)</li>
				<li>Download JSON File (for future editing, if desired)</li>
				<li>Download TXT File (for turning in)</li>
				<li>Reset -> Start A New Peer Review</li>
		</ol>
	</div>
</header>

<main>
	<section class="json-upload">
		<div class="form-container">
			<form>
				<fieldset>
					<legend>Student's SciPro_ID Name</legend>
					The student's ID whose solution you are peer reviewing.
					<br>
					<div class="form-group">
						<label for="name">SciPro_ID:</label>
						<input type="text" id="name" name="name" placeholder="Place name here" required>
					</div>
					<div class="form-group">
						<button type="button" id="submit-button" onclick="readName()">Submit</button>
					</div>
				</fieldset>
				<div id="output">
					Student selected
				</div>
			</form>
		</div>
		<div class="form-container">
			<form id="upload" action="" method="POST" enctype="multipart/form-data">
				<fieldset>
					<legend>JSON File Upload</legend>
					Upload a saved form and continue working on.
					<br><br>
					<input type="hidden" id="MAX_FILE_SIZE" name="MAX_FILE_SIZE" value="300000" />
					<div>
						<input type="file" id="fileselect" name="fileselect[]" multiple="multiple"/>
						<div id="filedrag">Drop files here</div>
					</div>
					<div id="submitbutton">
						<button type="submit" onclick="processJSONFile(event)">Upload File</button>
					</div>
				</fieldset>
				<div id="messages">
					<p>File selected</p>
				</div>
			</form>
		</div>
	</section>

	<section class="side-table" id="side-table" style="display:none">
		<div class="side">	
			<strong>Grading</strong>
			<table style="width:100%">
				<tr>
					<td class="grading-category">
						Code quality & design
						<div class="tooltip">
								<ul>
									<li>6 pts: Solution/goal is well thought out</li>
									<li>3 pts: Solution/goal is partially planned</li>
									<li>0 pts: Solution/goal is unrefined</li>
								</ul>
								<hr />
								<p>Weighting Factor: 4.0</p>
						</div>
					</td>
					<td>
						<input
							id="codequality-grading"
							class="point"
							factor="4"
							type="number"
							value="6"
							min="0.0"
							max="6.0"
							step="0.5"
							onchange="updatePercentage(this.value, this.id, this.getAttribute('factor'), 'codequality-percentage')"
						>
					</td>
					<td id="codequality-grading-percentage">24%</td>
				</tr>
				<tr>
					<td class="grading-category">
						Code execution & results
							<div class="tooltip">
								<ul>
									<li>6 pts: Code runs correctly in its entirety</li>
									<li>3 pts: Code runs, but only partially correct</li>
									<li>0 pts: Code doesn’t run, or doesn’t give proper output</li>
								</ul>
								<hr />
								<p>Weighting Factor: 4.0</p>
							</div>
						</div>
					</td>
					<td><input id="codeexecution-grading" class="point" factor="4" type="number" value="6" min="0.0"
								max="6.0" step="0.5" onchange="updatePercentage(this.value, this.id, this.getAttribute('factor'), 'codeexecution-percentage')"></td>
					<td><p id="codeexecution-grading-percentage">24%</p></td>
				</tr>
				<tr>
					<td class="grading-category">
						Assignment requirements
						<div class="tooltip">
							<ul>
								<li>6 pts: All of the requirements were fulfilled</li>
								<li>3 pts: Half of the requirements were met</li>
								<li>0 pts: Very little or none of the requirements were met</li>
							</ul>
							<hr />
							<p>Weighting Factor: 4.0</p>
						</div>
					</td>
					<td><input id="assignmentrequirements-grading" class="point" factor="4" type="number" value="6" min="0.0" max="6.0"
								step="0.5" onchange="updatePercentage(this.value, this.id, this.getAttribute('factor'), 'assignmentrequirements-percentage')"></td>
					<td><p id="assignmentrequirements-grading-percentage">24%</p></td>
				</tr>
				<tr>
					<td class="grading-category">
						Scientific programming
						<div class="tooltip">
							<ul>
								<li>6 pts: Code completely follows scientific programming concepts</li>
								<li>3 pts: Code somewhat follows scientific programming concepts</li>
								<li>0 pts: Code does not conform to scientific programming concepts</li>
							</ul>
							<hr />
							<p>Weighting Factor: 4.0</p>
						</div>
					</td>
					<td><input id="scientific-grading" class="point" factor="4" type="number" value="6" min="0.0" max="6.0"
								step="0.5" onchange="updatePercentage(this.value, this.id, this.getAttribute('factor'), 'scientific-percentage')"></td>
					<td><p id="scientific-grading-percentage">24%</p></td>
				</tr>
				<tr>
					<td class="grading-category">
						Creativity
						<div class="tooltip">
							<ul>
								<li>4 pts: Code shows significant problem solving skills, creativity, or robustness</li>
								<li>2 pts: Code shows an average approach to problem solving, creativity, or robustness</li>
								<li>0 pts: Code does not show notable problem solving skills, creativity, or robustness</li>
							</ul>
							<hr />
							<p>Weighting Factor: 1.0</p>
						</div>
					</td>
					<td ><input id="creativity-grading" class="point" factor="1" type="number" value="4" min="0.0" max="4.0"
								step="0.5" onchange="updatePercentage(this.value, this.id, this.getAttribute('factor'), 'creativity-percentage')"></td>
					<td><p style="width: 60px;" id="creativity-grading-percentage">4%</p></td>
				</tr>
				<tr>
					<td class="grading-category">
						Grade
						<div class="tooltip">
							<table class="GeneratedTable">
								<thead>
									<tr>
									<th>Grade</th>
									<th>Description</th>
									<th>Upper point level</th>
									<th>Lower point level</th>
									<th>American Equivalent</th>
									</tr>
								</thead>
								<tbody>
									<tr>
									<td>1.0</td>
									<td>excellent</td>
									<td>100</td>
									<td>95</td>
									<td>A+</td>
									</tr>
									<tr>
									<td>1.3</td>
									<td>very good</td>
									<td>94</td>
									<td>90</td>
									<td>A</td>
									</tr>
									<tr>
									<td>1.7</td>
									<td>very good</td>
									<td>89</td>
									<td>85</td>
									<td>A-</td>
									</tr>
									<tr>
									<td>2.0</td>
									<td>good</td>
									<td>84</td>
									<td>80</td>
									<td>B+</td>
									</tr>
									<tr>
									<td>2.3</td>
									<td>good</td>
									<td>79</td>
									<td>75</td>
									<td>B</td>
									</tr>
									<tr>
									<td>2.7</td>
									<td>good</td>
									<td>74</td>
									<td>70</td>
									<td>B-</td>
									</tr>
									<tr>
									<td>3.0</td>
									<td>above average</td>
									<td>69</td>
									<td>65</td>
									<td>C+</td>
									</tr>
									<tr>
									<td>3.3</td>
									<td>average</td>
									<td>64</td>
									<td>60</td>
									<td>C</td>
									</tr>
									<tr>
									<td>3.7</td>
									<td>below average</td>
									<td>59</td>
									<td>55</td>
									<td>C-</td>
									</tr>
									<tr>
									<td>4.0</td>
									<td>sufficient</td>
									<td>54</td>
									<td>50</td>
									<td>D</td>
									</tr>
									<tr>
									<td>5.0</td>
									<td>insufficient</td>
									<td>50</td>
									<td>0</td>
									<td>F</td>
									</tr>
								</tbody>
							</table>
						</div>
					</td>
					<td><p id="grade-percentage">100%</p></td>
					<td><p id="grade">1.0 (A+)</p></td>
				</tr>
			</table>
		</div>
	</section>
</main>

<script src="https://unpkg.com/@popperjs/core@2"></script>
<script src="https://unpkg.com/tippy.js@6"></script>
<script src="./functions/helper.js"></script>
<script src="./functions/json.js"></script>
<script src="./functions/generate.js"></script>
<script src="./functions/table.js"></script>
<script src="./functions/session.js"></script>
<script>
	const gradingCategories = document.querySelectorAll(".grading-category");
	gradingCategories.forEach(category => {
		tippy(category, {
			content: category.querySelector(".tooltip").innerHTML,
			allowHTML: true,
		});
	});
	6

	if (debug) {generateBody();}
	window.addEventListener("load", function() {
		processJSONFile();
	});
</script>
</body>
</html>